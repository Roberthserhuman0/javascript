<!DOCTYPE html>
<body>
    <script>
    let livrosTerror = [];
    let livrosFiccao = [];
    function calcularIdade(ano) {
        let idade = new Date().getFullYear() - ano;
        return idade;
    }
    function cadastrar(livros) {
        alert('cadastrar')
        let nome = prompt('nome do livro: ');
        let autor = prompt('nome do autor: ');
        let ano = parseInt(prompt('ano de publicação: '));
        let livro = {
            nome: nome,
            autor: autor,
            ano: ano
        };
        livros.push(livro);
    }
    function listar(livros) {
        alert('listar')
        let mensagem = '';
        let id = 0;
        for (let livro of livros) {
            let idade = calcularIdade(livro.ano);
            mensagem += id + ': ' + livro['nome'] + ' - ' + livro.autor + '\n' + livro.ano + '\n' + 'Publicado há ' + idade + ' anos' + '\n';
            id++ ;
        }
        alert(mensagem);
    }   
    function editar(livros) {
        listar()
        let id = parseInt(prompt('Qual id quer editar?'))
        let livro = livros[id]
        let nome = prompt(`nome do livro? [${livro.nome}]`); 
        if (nome == '') {
            nome = livro.nome        
        } 
        let autor = prompt(`nome do autor? [${livro.autor}]`);
        if (autor == '') {
            autor = livro.autor        
        }
        let ano = prompt(`ano de publicação? [${livro.ano}]`);
        if (ano == '') {
            ano = livro.ano        
        }
        let livroNovo = {
            nome: nome,
            autor: autor,
            ano: ano
        };
        livros[id] = livroNovo
    }  
    function apagar(livros) {
        listar()
        let id = parseInt(prompt('Qual id quer apagar?')) 
        livros.splice(id, 1)
    }

    loop:
        while (true) {
            alert('1:cadastrarFiccao\n2:lista\n3:editar\n4:apagar\n5:cadastrar terror\n6:listar terror\n7:sair');
            opcao = prompt('');
            switch (opcao) {
                case '1': 
                    cadastrar(livrosFiccao)
                    break
                case '2': 
                    listar(livrosFiccao)
                    break
                case '3':
                    editar(livrosFiccao)
                    break
                case '4':
                    apagar(livrosFiccao)
                    break
                case '5':
                    cadastrar(livrosTerror)
                    break
                case '6':
                    listar(livrosTerror)
                    break      
                case '7': 
                    alert('sair')
                    break loop;
           }
        }
    </script>
</body>
</html>

